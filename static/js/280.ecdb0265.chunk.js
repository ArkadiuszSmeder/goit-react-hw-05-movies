"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[280],{1280:function(n,e,t){t.r(e),t.d(e,{default:function(){return g}});var r,o,i=t(5861),u=t(9439),c=t(4687),a=t.n(c),s=t(1087),l=t(168),f=t(7924),h=f.ZP.div(r||(r=(0,l.Z)(["\n  display: inline-flex;\n  align-items: center;\n  position: relative;\n  margin-bottom: 16px;\n  text-transform: uppercase;\n"]))),p=f.ZP.input(o||(o=(0,l.Z)(["\n  // padding: 8px 32px 8px 8px;\n  border-radius: 4px;\n  font: inherit;\n"]))),d=t(184),v=function(n){var e=n.value,t=n.onChange;return(0,d.jsx)(h,{children:(0,d.jsx)(p,{type:"text",value:e,onChange:function(n){return t(n.target.value)}})})},x=t(2791),m=t(1933),g=function(){var n,e=(0,s.lr)(),t=(0,u.Z)(e,2),r=t[0],o=t[1],c=null!==(n=r.get("query"))&&void 0!==n?n:"",l=function(){var n=(0,i.Z)(a().mark((function n(){var e,t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e="https://api.themoviedb.org/3/search/movie?query=".concat(c,"&api_key=fcef3f7d90b41f3f85ee0cce371ea367"),n.next=3,fetch(e);case 3:if((t=n.sent).ok){n.next=6;break}throw new Error("Network response was not ok");case 6:return n.abrupt("return",t.json());case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),f=(0,x.useState)([]),h=(0,u.Z)(f,2),p=h[0],g=h[1],y=(0,m.useQuery)({queryKey:["movie-list"],queryFn:function(){return l()},enabled:!1,onSuccess:function(n){g(n.results),console.log(n),console.log(n.results.length)}}),k=y.refetch;return(0,x.useEffect)((function(){c&&k()}),[c,k]),(0,d.jsxs)("main",{children:[(0,d.jsx)(v,{value:c,onChange:function(n){o(""!==n?{query:n}:{})}}),(0,d.jsx)("button",{onClick:function(){k()},children:"Search"}),(0,d.jsx)("div",{children:p&&p.length>0?(0,d.jsx)("ul",{children:p.map((function(n){return(0,d.jsx)("li",{children:(0,d.jsx)(s.rU,{to:"/movies/".concat(n.id),state:{from:"/movies?query=".concat(c)},children:n.original_title})},n.id)}))}):(0,d.jsx)("p",{children:"No movies found"})})]})}},5861:function(n,e,t){function r(n,e,t,r,o,i,u){try{var c=n[i](u),a=c.value}catch(s){return void t(s)}c.done?e(a):Promise.resolve(a).then(r,o)}function o(n){return function(){var e=this,t=arguments;return new Promise((function(o,i){var u=n.apply(e,t);function c(n){r(u,o,i,c,a,"next",n)}function a(n){r(u,o,i,c,a,"throw",n)}c(void 0)}))}}t.d(e,{Z:function(){return o}})}}]);
//# sourceMappingURL=280.ecdb0265.chunk.js.map